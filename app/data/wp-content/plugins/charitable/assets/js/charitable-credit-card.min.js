/*!  1.6.54 2021-11-12 14:30 */

CHARITABLE=window.CHARITABLE||{},function(t){function e(t){var e=t.target.value,n=/^3(4|7)/.test(e),r=n?17:19,a=this.selectionStart,i="";e.split("").forEach(function(t){var e=i.length;if(n)if(4!==e&&11!==e||" "===t){if(4!==e&&11!==e&&" "===t)return}else i+=" ",a===e+1&&a++;else if((e+1)%5==0&&" "!==t)i+=" ",a===e+1&&a++;else if((e+1)%5!=0&&" "===t)return;i+=t}),/[^\d^\s]/.test(e)||e.length>r?(t.target.value=o,this.setSelectionRange(a-1,a-1)):(o=t.target.value=i,this.setSelectionRange(a,a))}var o="";CHARITABLE.Donation_Form.prototype.is_valid_card_number=function(){var i;return(i=[0,2,4,6,8,1,3,5,7,9],function(t){for(var e,n=t.length,r=1,a=0;n;)e=parseInt(t.charAt(--n),10),a+=(r^=1)?i[e]:e;return a&&0==a%10})(this.get_cc_number().replace(/ /g,""))},CHARITABLE.Donation_Form.prototype.validate_card_number=function(){return 0===t("#charitable-gateway-fields-"+this.get_payment_method()+" #charitable_field_cc_number").length||(!1!==this.is_valid_card_number()||(this.add_error(CHARITABLE_VARS.error_invalid_cc_number),!1))};var n=t("body");n.on("charitable:form:initialize",function(){n.on("input",'input[name="cc_number"]',e)}),n.on("charitable:form:validate",function(t,e){"make_donation"===e.get_input("charitable_action").val()&&e.validate_card_number()})}(jQuery);